<!DOCTYPE html><html lang="en"> <head><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-2K6JP8M5XE"></script>  <meta charset="utf-8"> <meta name="viewport" content="width=device-width"> <link rel="sitemap" href="/sitemap.xml"> <link rel="icon" type="image/x-icon" href="/images/favicon.ico">  <meta name="description" content="Learn how to make SEO more dynamic in a Phoenix App"> <meta property="og:type" content="website"> <meta property="og:url" content="https://thingshappening.com"> <meta property="og:title" content="On-page SEO meta-tags and page-title for Phoenix applications"> <meta property="og:description" content="Learn how to make SEO more dynamic in a Phoenix App"> <meta property="og:image" content="/images/social.jpg"> <meta property="twitter:card" content="summary_large_image"> <meta property="twitter:url" content="https://thingshappening.com"> <meta property="twitter:title" content="On-page SEO meta-tags and page-title for Phoenix applications"> <meta property="twitter:description" content="Learn how to make SEO more dynamic in a Phoenix App"> <meta property="twitter:image" content="/images/social.jpg"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-tomorrow.min.css"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/toolbar/prism-toolbar.min.css"> <link href="https://fonts.googleapis.com/css2?family=Londrina+Solid:wght@900&family=Poppins:ital,wght@0,400;0,600;1,400;1,700&display=swap" rel="stylesheet"> <title>On-page SEO meta-tags and page-title for Phoenix applications</title><style>pre[data-astro-cid-xj2uyz6m]{padding:8px 16px;overflow:auto;border-radius:4px;background:#343434}code[data-astro-cid-xj2uyz6m]{padding:4px;border-radius:4px;background:#343434;font-family:Consolas,Monaco,Andale Mono,monospace;direction:ltr;font-size:14px}pre[data-astro-cid-xj2uyz6m]>code[data-astro-cid-xj2uyz6m]{padding:0;line-height:1.5;word-break:normal;white-space:pre;word-spacing:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4}
</style>
<link rel="stylesheet" href="/_astro/2020-add-sitemap-to-phoenix-elixir-project.A85XpehK.css" /><script type="module" src="/_astro/hoisted.tlrkCr7x.js"></script></head> <body> <nav> <div class="max-w-5xl mx-auto px-3 py-3 flex items-center justify-between h-16"> <a href="/" class="font-bold text-xl hover:text-hot-pink">thingshappening</a> <a href="/search" class=""> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> </a> </div> <div class="w-full border-b-2 border-black squiggle"></div> </nav> <main class="py-12 lg:py-20"> <article class="max-w-5xl mx-auto px-3" data-astro-cid-xj2uyz6m> <header style="margin: 0 !important" class="mx-auto max-w-3xl text-center content" data-astro-cid-xj2uyz6m> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443" crossorigin="anonymous"></script> <meta name="google-adsense-account" content="ca-pub-2976969447542443"> <h1 data-astro-cid-xj2uyz6m>On-page SEO meta-tags and page-title for Phoenix applications</h1> </header> <!-- Image -->  <!-- YouTube Video -->  <!-- Content --> <section style="margin: 0 !important" class="max-w-3xl mx-auto py-6 lg:py-12 content" data-astro-cid-xj2uyz6m>  <p>*This post assumes you are using server generated HTML templates in your Elixir application.</p>
<p>Two important elements of on-page SEO are the title and meta tags used on your each of your pages. This data describes what the content on your page pertains to and allows a search engine to more accurately index your website. This post shows you how to dynamically add these tags to your application.</p>
<p>Add this data to pages you want Google to be aware of. For DevDecks as of Dec 2020 those are Posts and Decks. In your layout view add <code>meta_tags</code> and <code>meta_tag</code> methods that will iterate over a list of meta_tags and will output the content for each tag.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">layout_view.ex</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">defmodule</span><span style="color:#B392F0"> DevDecksWeb</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">LayoutView</span><span style="color:#F97583"> do</span></span>
<span class="line"><span style="color:#F97583">  use</span><span style="color:#B392F0"> DevDecksWeb</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">:view</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  def</span><span style="color:#B392F0"> meta_tags</span><span style="color:#E1E4E8">(attrs_list) </span><span style="color:#F97583">do</span></span>
<span class="line"><span style="color:#B392F0">    Enum</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">map</span><span style="color:#E1E4E8">(attrs_list, &#x26;meta_tag</span><span style="color:#F97583">/</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">  end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  def</span><span style="color:#B392F0"> meta_tag</span><span style="color:#E1E4E8">(attrs) </span><span style="color:#F97583">do</span></span>
<span class="line"><span style="color:#B392F0">    tag</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">:meta</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Enum</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">into</span><span style="color:#E1E4E8">(attrs, []))</span></span>
<span class="line"><span style="color:#F97583">  end</span></span>
<span class="line"><span style="color:#F97583">end</span></span></code></pre>
<p>In the root layout file (<code>root.html.leex</code>) call the meta_tags function if meta_tags are provided to assigns. Call <code>assigns[:meta_attrs]</code> directly here instead of <code>@meta_attrs</code> so that if <code>@meta_attrs</code> is not provided the application does not error and stop execution. Also check for a page_title the same way right below or display a default title:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">%</span><span style="color:#F97583">=</span><span style="color:#F97583"> if</span><span style="color:#E1E4E8"> assigns[</span><span style="color:#79B8FF">:meta_attrs</span><span style="color:#E1E4E8">], </span><span style="color:#79B8FF">do:</span><span style="color:#B392F0"> meta_tags</span><span style="color:#E1E4E8">(assigns[</span><span style="color:#79B8FF">:meta_attrs</span><span style="color:#E1E4E8">]) %</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">%</span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> live_title_tag assigns[</span><span style="color:#79B8FF">:page_title</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">||</span><span style="color:#9ECBFF"> "DevDecks · Software Development Flashcards"</span><span style="color:#E1E4E8"> %</span><span style="color:#F97583">></span></span></code></pre>
<p>And then if the template is generated from LiveView add page_title and meta_tags to assigns in mount like so:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> mount</span><span style="color:#E1E4E8">(</span><span style="color:#6A737D">_params</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">_session</span><span style="color:#E1E4E8">, socket) </span><span style="color:#F97583">do</span></span>
<span class="line"><span style="color:#E1E4E8">  meta_attrs </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [</span></span>
<span class="line"><span style="color:#E1E4E8">    %{</span><span style="color:#79B8FF">name:</span><span style="color:#9ECBFF"> "keywords"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">content:</span><span style="color:#9ECBFF"> "tech study flashcards, full list study cards"</span><span style="color:#E1E4E8">},</span></span>
<span class="line"><span style="color:#E1E4E8">    %{</span><span style="color:#79B8FF">name:</span><span style="color:#9ECBFF"> "description"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">content:</span><span style="color:#9ECBFF"> "Software Development Study Flashcards"</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#E1E4E8">  ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  {</span><span style="color:#79B8FF">:ok</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">assign</span><span style="color:#E1E4E8">(socket, </span><span style="color:#79B8FF">meta_attrs:</span><span style="color:#E1E4E8"> meta_attrs, </span><span style="color:#79B8FF">page_title:</span><span style="color:#9ECBFF"> "DevDecks · Software Development Study Flashcards"</span><span style="color:#E1E4E8">)}</span></span>
<span class="line"><span style="color:#F97583">end</span></span></code></pre>
<p>And if you’re using an MVC approach add it to your controller that is generating the template:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> index</span><span style="color:#E1E4E8">(conn, </span><span style="color:#6A737D">_params</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">do</span></span>
<span class="line"><span style="color:#E1E4E8">  meta_attrs </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [</span></span>
<span class="line"><span style="color:#E1E4E8">    %{</span><span style="color:#79B8FF">name:</span><span style="color:#9ECBFF"> "keywords"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">content:</span><span style="color:#9ECBFF"> "tech blog, tech writing"</span><span style="color:#E1E4E8">},</span></span>
<span class="line"><span style="color:#E1E4E8">    %{</span><span style="color:#79B8FF">name:</span><span style="color:#9ECBFF"> "description"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">content:</span><span style="color:#9ECBFF"> "A tech blog by DevDecks"</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#E1E4E8">  ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  render</span><span style="color:#E1E4E8">(conn, </span><span style="color:#9ECBFF">"index.html"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">meta_attrs:</span><span style="color:#E1E4E8"> meta_attrs, </span><span style="color:#79B8FF">page_title:</span><span style="color:#9ECBFF"> "DevDecks · The tech blog by DevDecks"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">end</span></span></code></pre>
<p>One more thing to note is that when you are adding these tags you want to keep them in the <code>&#x3C;head></code> of the HTML doc because if they are in the body some technologies won’t notice them, for example social media OpenGraph tags won’t be read if they are not in the head of the document.</p>
<br>
Resources I found useful when building this:
- https://elixirforum.com/t/how-to-create-dynamic-meta-tag-in-phoenix/15286
- https://stackoverflow.com/questions/1447842/what-happens-if-the-meta-tags-are-present-in-the-document-body  </section> <div data-astro-cid-xj2uyz6m> <!-- sidebar vertical --> <script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443" crossorigin="anonymous"></script> <ins class="adsbygoogle" style="position: absolute; right: 50px; top: 200px; width: 300px; height: 1000px;" data-ad-client="ca-pub-2976969447542443" data-ad-slot="1095168865" data-ad-format="auto" data-full-width-responsive="true" data-astro-cid-xj2uyz6m></ins>  </div> </article>  </main> </body></html>