<!DOCTYPE html><html lang="en"> <head><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-2K6JP8M5XE"></script>  <meta charset="utf-8"> <meta name="viewport" content="width=device-width"> <link rel="sitemap" href="/sitemap.xml"> <link rel="icon" type="image/x-icon" href="/images/favicon.ico">  <meta name="description" content="elixir processes in phoenix"> <meta property="og:type" content="website"> <meta property="og:url" content="https://thingshappening.com"> <meta property="og:title" content="An introduction to BEAM/Elixir processes in Phoenix"> <meta property="og:description" content="elixir processes in phoenix"> <meta property="og:image" content="/images/social.jpg"> <meta property="twitter:card" content="summary_large_image"> <meta property="twitter:url" content="https://thingshappening.com"> <meta property="twitter:title" content="An introduction to BEAM/Elixir processes in Phoenix"> <meta property="twitter:description" content="elixir processes in phoenix"> <meta property="twitter:image" content="/images/social.jpg"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-tomorrow.min.css"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/toolbar/prism-toolbar.min.css"> <link href="https://fonts.googleapis.com/css2?family=Londrina+Solid:wght@900&family=Poppins:ital,wght@0,400;0,600;1,400;1,700&display=swap" rel="stylesheet"> <title>An introduction to BEAM/Elixir processes in Phoenix</title><style>pre[data-astro-cid-xj2uyz6m]{padding:8px 16px;overflow:auto;border-radius:4px;background:#343434}code[data-astro-cid-xj2uyz6m]{padding:4px;border-radius:4px;background:#343434;font-family:Consolas,Monaco,Andale Mono,monospace;direction:ltr;font-size:14px}pre[data-astro-cid-xj2uyz6m]>code[data-astro-cid-xj2uyz6m]{padding:0;line-height:1.5;word-break:normal;white-space:pre;word-spacing:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4}
</style>
<link rel="stylesheet" href="/_astro/2020-add-sitemap-to-phoenix-elixir-project.A85XpehK.css" /><script type="module" src="/_astro/hoisted.tlrkCr7x.js"></script></head> <body> <nav> <div class="max-w-5xl mx-auto px-3 py-3 flex items-center justify-between h-16"> <a href="/" class="font-bold text-xl hover:text-hot-pink">thingshappening</a> <a href="/search" class=""> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> </a> </div> <div class="w-full border-b-2 border-black squiggle"></div> </nav> <main class="py-12 lg:py-20"> <article class="max-w-5xl mx-auto px-3" data-astro-cid-xj2uyz6m> <header style="margin: 0 !important" class="mx-auto max-w-3xl text-center content" data-astro-cid-xj2uyz6m> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443" crossorigin="anonymous"></script> <meta name="google-adsense-account" content="ca-pub-2976969447542443"> <h1 data-astro-cid-xj2uyz6m>An introduction to BEAM/Elixir processes in Phoenix</h1> </header> <!-- Image -->  <!-- YouTube Video -->  <!-- Content --> <section style="margin: 0 !important" class="max-w-3xl mx-auto py-6 lg:py-12 content" data-astro-cid-xj2uyz6m>  <p>I will introduce this through a two example web interaction</p>
<ol>
<li>A web request that runs some application code.</li>
<li>A web request that runs some application code and that application code reaches out to a database.</li>
</ol>
<p>Each step of this interaction is a separate Elixir Process.</p>
<p>The Phoenix web framework sets up an HTTP server using the libraries Cowboy and Ranch. When a request is sent to your application over HTTP a Cowboy process is spawned to handle it, once the request is received and validated another Elixir Process is spawned and therefore supervised by the Cowboy process. This newly spawned Process is for the application code to handle any business logic required before the HTTP server responds. Once the application process has finished executing a message is sent back to the Cowboy/HTTP process that generated it and the connection is closed.</p>
<p>Now let’s say the application code called an <code>Ecto.Repo</code> database for a query, this scenario is a slightly different.</p>
<p>When your Phoenix application was started, assuming you are using Ecto for database interactions, a pool of (usually 10) long running processes are started immediately and waiting to be used for code execution. These are started immediately instead of being spawned each time the Repo is called because connecting to the database is a “heavy” task, meaning it takes more time and computer resources to execute than other processes that are not pooled. The Erlang and Elixir process pooling technology is Poolboy.</p>
<p>When your application code makes a query using Repo, it uses one of the established pooled process connections to do so. Once the query completes then a message is sent to the application process. At that point the application process continues any additional code execution before sending the final response to the HTTP process.</p>
<p>There are many more processes running in any Phoenix application. My hope is after reading this it will give you confidence to explore more of the ecosystem.</p>
<h2>Aside: Observer</h2>
<p>To get a visualization of Elixir processes in your Phoenix application run the following command:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">iex </span><span style="color:#F97583">-</span><span style="color:#B392F0">S</span><span style="color:#E1E4E8"> mix phx.server</span></span></code></pre>
<p>This starts your server in interactive mode. From there you start Observer, Elixirs process introspection tool through this command:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#79B8FF">:observer</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">start</span></span></code></pre>
<p>Once opened navigate to the applications tab to get a diagram of all running processes, you can try restarting processes to get more hands on experience with their behavior.</p>
<p>More Elixir process posts:
<a href="https://thingshappening.com/2021-beam-elixir-processes-explained/">Processes for web programmers</a>,
<a href="https://thingshappening.com/2021-let-it-crash-explained/">Let it crash explained</a>,
<a href="https://thingshappening.com/2021-elixir-processes-concurrency-and-parallelism/">Processes and concurrency</a>,
<a href="https://thingshappening.com/2021-elixir-process-module-cheatsheet/">Process module cheatsheet</a></p>  </section> <div data-astro-cid-xj2uyz6m> <!-- sidebar vertical --> <script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443" crossorigin="anonymous"></script> <ins class="adsbygoogle" style="position: absolute; right: 50px; top: 200px; width: 300px; height: 1000px;" data-ad-client="ca-pub-2976969447542443" data-ad-slot="1095168865" data-ad-format="auto" data-full-width-responsive="true" data-astro-cid-xj2uyz6m></ins>  </div> </article>  </main> </body></html>