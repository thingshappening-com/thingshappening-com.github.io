<!DOCTYPE html><html lang="en"> <head><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-2K6JP8M5XE"></script>  <meta charset="utf-8"> <meta name="viewport" content="width=device-width"> <link rel="sitemap" href="/sitemap.xml"> <link rel="icon" type="image/x-icon" href="/images/favicon.ico">  <meta name="description" content="How to add nofollow to pages in a Phoenix application"> <meta property="og:type" content="website"> <meta property="og:url" content="https://thingshappening.com"> <meta property="og:title" content="Add nofollow to pages in a Phoenix application"> <meta property="og:description" content="How to add nofollow to pages in a Phoenix application"> <meta property="og:image" content="/images/social.jpg"> <meta property="twitter:card" content="summary_large_image"> <meta property="twitter:url" content="https://thingshappening.com"> <meta property="twitter:title" content="Add nofollow to pages in a Phoenix application"> <meta property="twitter:description" content="How to add nofollow to pages in a Phoenix application"> <meta property="twitter:image" content="/images/social.jpg"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-tomorrow.min.css"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/toolbar/prism-toolbar.min.css"> <link href="https://fonts.googleapis.com/css2?family=Londrina+Solid:wght@900&family=Poppins:ital,wght@0,400;0,600;1,400;1,700&display=swap" rel="stylesheet"> <title>Add nofollow to pages in a Phoenix application</title><style>pre[data-astro-cid-xj2uyz6m]{padding:8px 16px;overflow:auto;border-radius:4px;background:#343434}code[data-astro-cid-xj2uyz6m]{padding:4px;border-radius:4px;background:#343434;font-family:Consolas,Monaco,Andale Mono,monospace;direction:ltr;font-size:14px}pre[data-astro-cid-xj2uyz6m]>code[data-astro-cid-xj2uyz6m]{padding:0;line-height:1.5;word-break:normal;white-space:pre;word-spacing:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4}
</style>
<link rel="stylesheet" href="/_astro/2020-add-sitemap-to-phoenix-elixir-project.A85XpehK.css" /><script type="module" src="/_astro/hoisted.tlrkCr7x.js"></script></head> <body> <nav> <div class="max-w-5xl mx-auto px-3 py-3 flex items-center justify-between h-16"> <a href="/" class="font-bold text-xl hover:text-hot-pink">thingshappening</a> <a href="/search" class=""> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path> </svg> </a> </div> <div class="w-full border-b-2 border-black squiggle"></div> </nav> <main class="py-12 lg:py-20"> <article class="max-w-5xl mx-auto px-3" data-astro-cid-xj2uyz6m> <header style="margin: 0 !important" class="mx-auto max-w-3xl text-center content" data-astro-cid-xj2uyz6m> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443" crossorigin="anonymous"></script> <meta name="google-adsense-account" content="ca-pub-2976969447542443"> <h1 data-astro-cid-xj2uyz6m>Add nofollow to pages in a Phoenix application</h1> </header> <!-- Image -->  <!-- YouTube Video -->  <!-- Content --> <section style="margin: 0 !important" class="max-w-3xl mx-auto py-6 lg:py-12 content" data-astro-cid-xj2uyz6m>  <p>In a <a href="https://thingshappening.com/2020-seo-in-elixir/">previous post</a> I outlined how you can add meta tags to a template in a phoenix application to help with SEO. In this post I will review the functionality that’s needed to accomplish setting <code>&#x3C;meta></code> tags in the <code>&#x3C;head></code> of your html document. The tags will be used to tell Google and most other search engines that this page should not be included in their index.</p>
<p><code>&#x3C;meta></code> tags are usually used to communicate with an outside service regarding something you’d like them to know, in the SEO example you want a search engine to understand more information about the content of the page. For this example we want search engines to know that we don’t want this page to be included in their index.</p>
<p>To add meta tags to templates in your html documents first we will create functions in your Phoenix LayoutView that can be invoked by any other template in your application. By adding the functions here we can optionally choose to call them within any other template we create, so we don’t have to have the tags on every page, just the ones that need it.</p>
<p>That code looks like:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">defmodule</span><span style="color:#B392F0"> DevDecksWeb</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">LayoutView</span><span style="color:#F97583"> do</span></span>
<span class="line"><span style="color:#F97583">  use</span><span style="color:#B392F0"> DevDecksWeb</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">:view</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  def</span><span style="color:#B392F0"> meta_tags</span><span style="color:#E1E4E8">(attrs_list) </span><span style="color:#F97583">do</span></span>
<span class="line"><span style="color:#B392F0">    Enum</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">map</span><span style="color:#E1E4E8">(attrs_list, &#x26;meta_tag</span><span style="color:#F97583">/</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">  end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  def</span><span style="color:#B392F0"> meta_tag</span><span style="color:#E1E4E8">(attrs) </span><span style="color:#F97583">do</span></span>
<span class="line"><span style="color:#B392F0">    tag</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">:meta</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Enum</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">into</span><span style="color:#E1E4E8">(attrs, []))</span></span>
<span class="line"><span style="color:#F97583">  end</span></span>
<span class="line"><span style="color:#F97583">end</span></span></code></pre>
<p>In the root layout file (root.html.leex) call the <code>meta_tags</code> function if <code>meta_tags</code> are provided to <code>assigns</code>. Call <code>assigns[:meta_attrs]</code> directly here instead of <code>@meta_attrs</code> so that if <code>@meta_attrs</code> is not provided the application does not error and stop execution.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">%</span><span style="color:#F97583">=</span><span style="color:#F97583"> if</span><span style="color:#E1E4E8"> assigns[</span><span style="color:#79B8FF">:meta_attrs</span><span style="color:#E1E4E8">], </span><span style="color:#79B8FF">do:</span><span style="color:#B392F0"> meta_tags</span><span style="color:#E1E4E8">(assigns[</span><span style="color:#79B8FF">:meta_attrs</span><span style="color:#E1E4E8">]) %</span><span style="color:#F97583">></span></span></code></pre>
<p>If you’re using a LiveView template add the <code>meta_tags</code> to <code>assigns</code> in mount like the below:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> mount</span><span style="color:#E1E4E8">(</span><span style="color:#6A737D">_params</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">_session</span><span style="color:#E1E4E8">, socket) </span><span style="color:#F97583">do</span></span>
<span class="line"><span style="color:#E1E4E8">    meta_attrs </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [</span></span>
<span class="line"><span style="color:#E1E4E8">      %{</span><span style="color:#79B8FF">name:</span><span style="color:#9ECBFF"> "robots"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">content:</span><span style="color:#9ECBFF"> "noindex"</span><span style="color:#E1E4E8">},</span></span>
<span class="line"><span style="color:#E1E4E8">      %{</span><span style="color:#79B8FF">name:</span><span style="color:#9ECBFF"> "googlebot"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">content:</span><span style="color:#9ECBFF"> "noindex"</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#E1E4E8">    ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  {</span><span style="color:#79B8FF">:ok</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">assign</span><span style="color:#E1E4E8">(socket, </span><span style="color:#79B8FF">meta_attrs:</span><span style="color:#E1E4E8"> meta_attrs)}</span></span>
<span class="line"><span style="color:#F97583">end</span></span></code></pre>
<p>If you’re using an MVC approach you can add the <code>meta_attrs</code> to your controller that is generating the template:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">def</span><span style="color:#B392F0"> index</span><span style="color:#E1E4E8">(conn, </span><span style="color:#6A737D">_params</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">do</span></span>
<span class="line"><span style="color:#E1E4E8">  meta_attrs </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [</span></span>
<span class="line"><span style="color:#E1E4E8">    %{</span><span style="color:#79B8FF">name:</span><span style="color:#9ECBFF"> "robots"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">content:</span><span style="color:#9ECBFF"> "noindex"</span><span style="color:#E1E4E8">},</span></span>
<span class="line"><span style="color:#E1E4E8">    %{</span><span style="color:#79B8FF">name:</span><span style="color:#9ECBFF"> "googlebot"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">content:</span><span style="color:#9ECBFF"> "noindex"</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#E1E4E8">  ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  render</span><span style="color:#E1E4E8">(conn, </span><span style="color:#9ECBFF">"index.html"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">meta_attrs:</span><span style="color:#E1E4E8"> meta_attrs)</span></span>
<span class="line"><span style="color:#F97583">end</span></span></code></pre>
<p>The meta tags shown in this example are directions from <a href="https://developers.google.com/search/docs/advanced/crawling/block-indexing">Google’s documentation</a>. It should be noted that these tags should prevent <em>most</em> web crawlers from indexing your page, but it’s possible that other crawlers handle indexing differently.</p>
<p>Further reading:</p>
<ul>
<li><a href="https://thingshappening.com/2022-in-memory-pagination-by-example/">How to paginate an in memory array</a></li>
</ul>  </section> <div data-astro-cid-xj2uyz6m> <!-- sidebar vertical --> <script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2976969447542443" crossorigin="anonymous"></script> <ins class="adsbygoogle" style="position: absolute; right: 50px; top: 200px; width: 300px; height: 1000px;" data-ad-client="ca-pub-2976969447542443" data-ad-slot="1095168865" data-ad-format="auto" data-full-width-responsive="true" data-astro-cid-xj2uyz6m></ins>  </div> </article>  </main> </body></html>